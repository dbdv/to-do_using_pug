extends layout

block headers 
  title todo app
  link(rel='stylesheet' href='/stylesheets/todo.css')
  link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous")


block content
  div(class="myContainer" style="background-color:white")
            .container-fluid
                h1( class="text-center") My todo app
                form(action="#" method="POST")
                  div(class="col-auto g-3 align-items-center")
                    div(class="col-auto") 
                      label Email 
                      input(type="email" name="email" class="form-control" required)
                    div(class="col-auto")
                      label Password 
                      input(type="password", name="pass" class="form-control" required)
                    div(class="col-auto") 
                      button(class="btn btn-primary" onclick="return login();" style="margin-top: 5px;") Login
  script.
    function login(){

      const regexEmail = /^[a-zA-Z]+@+[a-zA-Z]+.+com$/

      const user = {
        email: document.querySelector("email").value
        password: document.querySelector("pass").value
      }

      if(!user.password || !regexEmail.test(user.email)){
        alert("Datos invalidos")
        return false;
      }

      console.table(user)
      /*
      //action="/login" 
      var xhttp = new XMLHttpRequest();
      xhttp.open("POST", "/todo/add", true); 
      xhttp.setRequestHeader("Content-Type", "application/json");
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
                        // Response
          var response = this.responseText;
        }
      };
      var data = {newTask: newTask};
      xhttp.send(JSON.stringify(data)); */
      return false;
    }